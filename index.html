<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="inicio.css">
    <title>Página de Inicio</title>
    <!-- Firebase SDK -->
    <script type="module">
        // Importa las funciones necesarias de Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";

        // Configuración de Firebase
        const firebaseConfig = {
          apiKey: "AIzaSyDdEkQzuAD_dflNmLyqwVFGw5q5p37OzCw",
          authDomain: "usuariosstocktech.firebaseapp.com",
          databaseURL: "https://usuariosstocktech-default-rtdb.europe-west1.firebasedatabase.app",
          projectId: "usuariosstocktech",
          storageBucket: "usuariosstocktech.firebasestorage.app",
          messagingSenderId: "125777188158",
          appId: "1:125777188158:web:5cc4bf9f1d87c31533886f",
          measurementId: "G-DXTBLMW3EQ"
        };

        // Inicializa Firebase y el servicio de autenticación
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Función para manejar el inicio de sesión
        document.addEventListener("DOMContentLoaded", () => {
          const loginButton = document.querySelector(".button");
          const messageDiv = document.createElement("div");
          messageDiv.id = "message";
          document.body.appendChild(messageDiv);

          loginButton.addEventListener("click", (e) => {
            e.preventDefault();

            // Obtén los valores del formulario
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            // Intenta iniciar sesión con Firebase
            signInWithEmailAndPassword(auth, email, password)
              .then((userCredential) => {
                const user = userCredential.user;
                // Redirige al usuario a la página principal
                setTimeout(() => {
                  window.location.href = "gestion.html"; // Asegúrate de que esta ruta sea correcta
                }, 500);
              })
              .catch((error) => {
                alert(`Error: ${error.message}`);
              });
          });
        });
    </script>
</head>
<body>
    <div class="container">
        <!-- Logo -->
        <img src="LOGO_StockTech_Transparente.png" alt="Logo de la aplicación" class="logo">

        <!-- Título -->
        <div class="title">Sign In</div>

        <!-- Contenedor de entrada -->
        <div class="input-container">
            <!-- Email -->
            <label for="email">E-MAIL</label>
            <input type="email" id="email" placeholder="Introduce tu correo">

            <!-- Contraseña -->
            <label for="password">PASSWORD</label>
            <input type="password" id="password" placeholder="Introduce tu contraseña">

            <!-- Registro -->
            <div class="register">
                <a href="registro.html" style="color: #1E88E5; text-decoration: none;">¿No tienes una cuenta? Regístrate</a>
            </div>
        </div>

        <!-- Botón de inicio de sesión -->
        <button type="submit" class="button">Iniciar Sesión</button>

        <!-- Redes sociales -->
        <div class="social-icons">
            <a href="https://github.com/alexbike2001" target="_blank">
               <img src="github-mark-white.png" alt="GitHub">
            </a>
            
        </div>
    </div>
</body>
</html>
